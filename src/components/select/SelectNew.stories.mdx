import {ArgsTable, Meta, Story, Canvas} from '@storybook/addon-docs';
import Select from './Select';
import PageHeader from 'blocks/PageHeader';
import Button from '../buttons/Button';

<Meta
  title="Components/SelectNew"
  component={Select}
  args={{
    options: [
      {value: 'physics', label: 'Physics'},
      {value: 'history', label: 'History'},
      {value: 'science', label: 'Science'},
    ],
  }}
/>

<PageHeader>Select</PageHeader>

- [Stories](#stories)

## Overview

<Canvas>
  <Story name="Default">{args => <Select {...args} />}</Story>
</Canvas>

<ArgsTable story="Default" />

## Stories

### With option select

<Canvas>
  <Story name="With option select">
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            setSelectedOptions([option]);
          }}
        />
      );
    }}
  </Story>
</Canvas>

### Default expanded

<Canvas>
  <Story name="Default expanded">
    {args => {
      return <Select {...args} defaultExpanded />;
    }}
  </Story>
</Canvas>

### With icons

<Canvas>
  <Story
    name="With icons"
    args={{
      withIcons: true,
      options: [
        {value: 'physics', label: 'Physics', iconName: 'physics'},
        {value: 'history', label: 'History', iconName: 'history'},
        {value: 'science', label: 'Science', iconName: 'science'},
      ],
    }}
  >
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            setSelectedOptions([option]);
          }}
        />
      );
    }}
  </Story>
</Canvas>

### With multiple options select

<Canvas>
  <Story name="With multiple options select">
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      const handleOptionChange = option => {
        // If it was not present, add it
        if (!selectedOptions.find(item => item.value === option.value))
          setSelectedOptions([...selectedOptions, option]);
        else {
          // else, remove from array of selected options
          setSelectedOptions(
            [...selectedOptions].filter(item => item.value !== option.value)
          );
        }
      };
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            handleOptionChange(option);
          }}
          multiSelect
        />
      );
    }}
  </Story>
</Canvas>

### With preselected multiple options

<Canvas>
  <Story name="With preselected multiple options">
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([
        args.options[1],
        args.options[2],
      ]);
      const handleOptionChange = option => {
        // If it was not present, add it
        if (!selectedOptions.find(item => item.value === option.value))
          setSelectedOptions([...selectedOptions, option]);
        else {
          // else, remove from array of selected options
          setSelectedOptions(
            [...selectedOptions].filter(item => item.value !== option.value)
          );
        }
      };
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            handleOptionChange(option);
          }}
          multiSelect
        />
      );
    }}
  </Story>
</Canvas>
