import {ArgsTable, Meta, Story, Canvas} from '@storybook/addon-docs';
import Select from './Select';
import PageHeader from 'blocks/PageHeader';
import Button from '../buttons/Button';
import Text from '../text/Text';
import Flex from '../flex/Flex';

<Meta
  title="Components/SelectNew"
  component={Select}
  args={{
    options: [
      {
        value: 'physics',
        label: 'Physics',
      },
      {value: 'history', label: 'History'},
      {value: 'science', label: 'Science'},
    ],
  }}
/>

<PageHeader>Select</PageHeader>

- [Stories](#stories)

## Overview

<Canvas>
  <Story name="Default">{args => <Select {...args} />}</Story>
</Canvas>

<ArgsTable story="Default" />

## Stories

### With option select

<Canvas>
  <Story name="With option select">
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            setSelectedOptions([option]);
          }}
        />
      );
    }}
  </Story>
</Canvas>

### Default expanded

<Canvas>
  <Story name="Default expanded">
    {args => {
      return <Select {...args} defaultExpanded />;
    }}
  </Story>
</Canvas>

### With icons

<Canvas>
  <Story
    name="With icons"
    args={{
      withIcons: true,
      options: [
        {value: 'physics', label: 'Physics', iconName: 'physics'},
        {value: 'history', label: 'History', iconName: 'history'},
        {value: 'science', label: 'Science', iconName: 'science'},
      ],
    }}
  >
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            setSelectedOptions([option]);
          }}
        />
      );
    }}
  </Story>
</Canvas>

### With long option label

<Canvas>
  <Story
    name="With long option label"
    args={{
      withIcons: true,
      options: [
        {
          value: 'tv',
          label: 'Usłyszałem o Brainly w reklamie telewizyjnej w telewizji',
          iconName: 'physics',
        },
        {value: 'fb', label: 'Media społecznościowe', iconName: 'history'},
        {
          value: 'search',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
      ],
    }}
  >
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            setSelectedOptions([option]);
          }}
        />
      );
    }}
  </Story>
</Canvas>

### With multiple options select

<Canvas>
  <Story name="With multiple options select">
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      const handleOptionChange = option => {
        // If it was not present, add it
        if (!selectedOptions.find(item => item.value === option.value))
          setSelectedOptions([...selectedOptions, option]);
        else {
          // else, remove from array of selected options
          setSelectedOptions(
            [...selectedOptions].filter(item => item.value !== option.value)
          );
        }
      };
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            handleOptionChange(option);
          }}
          multiSelect
        />
      );
    }}
  </Story>
</Canvas>

### With preselected multiple options

<Canvas>
  <Story name="With preselected multiple options">
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([
        args.options[1],
        args.options[2],
      ]);
      const handleOptionChange = option => {
        // If it was not present, add it
        if (!selectedOptions.find(item => item.value === option.value))
          setSelectedOptions([...selectedOptions, option]);
        else {
          // else, remove from array of selected options
          setSelectedOptions(
            [...selectedOptions].filter(item => item.value !== option.value)
          );
        }
      };
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            handleOptionChange(option);
          }}
          multiSelect
        />
      );
    }}
  </Story>
</Canvas>

### With space constraints

<Canvas>
  <Story
    name="With space constraints"
    height="100%"
    args={{
      withIcons: true,
      options: [
        {
          value: 'tv',
          label: 'Usłyszałem o Brainly w reklamie telewizyjnej w telewizji',
          iconName: 'physics',
        },
        {value: 'fb', label: 'Media społecznościowe', iconName: 'history'},
        {
          value: 'search',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
        {
          value: 'search1',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
        {
          value: 'search2',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
        {
          value: 'search3',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
        {
          value: 'search4',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
        {
          value: 'search5',
          label: 'Wyszukiwarka internetowa',
          iconName: 'science',
        },
      ],
    }}
  >
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      React.useEffect(() => {
        document.getElementById('selectId').scrollIntoView();
      }, []);
      return (
        <div>
          <Text>
            Scroll the layout vertically and horizontally and see how the Select
            position affects the popup position
          </Text>
          <div
            style={{
              border: '1px solid gray',
              height: '400px',
              width: '800px',
              overflow: 'scroll',
              resize: 'auto',
            }}
          >
            <Flex
              style={{
                height: '1000px',
                width: '2000px',
              }}
              direction="column"
              alignItems="center"
              justifyContent="center"
            >
              <Select
                {...args}
                id="selectId"
                selectedOptions={selectedOptions}
                onOptionChange={option => {
                  setSelectedOptions([option]);
                }}
              />
            </Flex>
          </div>
        </div>
      );
    }}
  </Story>
</Canvas>

### With long list

<Canvas>
  <Story
    name="With long list"
    height="100%"
    args={{
      options: [
        {value: 'physics', label: 'Physics'},
        {value: 'history', label: 'History'},
        {value: 'science', label: 'Science'},
        {value: 'physics2', label: 'Physics'},
        {value: 'history2', label: 'History'},
        {value: 'science2', label: 'Science'},
        {value: 'physics3', label: 'Physics'},
        {value: 'history3', label: 'History'},
        {value: 'science3', label: 'Science'},
        {value: 'physics4', label: 'Physics'},
        {value: 'history4', label: 'History'},
        {value: 'science4', label: 'Science'},
        {value: 'physics5', label: 'Physics'},
        {value: 'history5', label: 'History'},
        {value: 'science5', label: 'Science'},
        {value: 'physics6', label: 'Physics'},
        {value: 'history6', label: 'History'},
        {value: 'science6', label: 'Science'},
      ],
    }}
  >
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([]);
      return (
        <Select
          {...args}
          selectedOptions={selectedOptions}
          onOptionChange={option => {
            setSelectedOptions([option]);
          }}
        />
      );
    }}
  </Story>
</Canvas>
