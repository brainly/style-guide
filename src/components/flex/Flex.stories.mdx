import {ArgsTable, Meta, Story, Canvas} from '@storybook/addon-docs';
import {StoryVariant} from '../../_docs/utils';
import {Preview} from '../../_docs/blocks/';
import Flex, {FLEX_DIRECTION, FLEX_MARGINS, FLEX_JUSTIFY_VALUES} from './Flex';
import Text, {TEXT_SIZE} from '../text/Text';
import SeparatorHorizontal from '../separators/SeparatorHorizontal';
import Box from '../box/Box';
import {formatTags} from '../../_docs/utils';
import {FLEX_ALIGNMENT_VALUES} from './FlexConsts';
import FlexA11y from './Flex.a11y.mdx';
const boxStyle = {
  border: true,
  borderColor: 'blue-40',
  color: 'blue-20',
};

<Meta
  title="Components/Flex"
  component={Flex}
  argTypes={{
    children: {
      control: {
        disable: true,
      },
    },
    htmlTag: {
      defaultValue: 'div',
      table: {
        defaultValue: {summary: 'div'},
      },
    },
    fullWidth: {
      description: '(Responsive)',
      table: {
        type: {
          summary: 'boolean',
        },
      },
      control: {
        type: 'boolean',
      },
    },
    fullHeight: {
      description: '(Responsive)',
      table: {
        type: {
          summary: 'boolean',
        },
      },
      control: {
        type: 'boolean',
      },
    },
    noShrink: {
      description: '(Responsive)',
      table: {
        type: {
          summary: 'boolean',
        },
      },
      control: {
        type: 'boolean',
      },
    },
    direction: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_DIRECTION)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_DIRECTION),
      },
    },
    justifyContent: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_JUSTIFY_VALUES)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_JUSTIFY_VALUES),
      },
    },
    alignContent: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_ALIGNMENT_VALUES)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_ALIGNMENT_VALUES),
      },
    },
    alignItems: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_ALIGNMENT_VALUES)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_ALIGNMENT_VALUES),
      },
    },
    alignSelf: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_ALIGNMENT_VALUES)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_ALIGNMENT_VALUES),
      },
    },
    inlineFlex: {
      description: '(Responsive)',
      table: {
        type: {
          summary: 'boolean',
        },
      },
      control: {
        type: 'boolean',
      },
    },
    wrap: {
      description: '(Responsive)',
      table: {
        type: {
          summary: 'boolean',
        },
      },
      control: {
        type: 'boolean',
      },
    },
    wrapReverse: {
      description: '(Responsive)',
      table: {
        type: {
          summary: 'boolean',
        },
      },
      control: {
        type: 'boolean',
      },
    },
    margin: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_MARGINS)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_MARGINS),
      },
    },
    marginTop: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_MARGINS)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_MARGINS),
      },
    },
    marginRight: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_MARGINS)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_MARGINS),
      },
    },
    marginBottom: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_MARGINS)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_MARGINS),
      },
    },
    marginLeft: {
      description: '(Responsive)',
      table: {
        type: {
          summary: formatTags(Object.values(FLEX_MARGINS)),
        },
      },
      control: {
        type: 'select',
        options: Object.values(FLEX_MARGINS),
      },
    },
  }}
/>

# Flex

- [Stories](#stories)
- [Accesibility](#accessibility)
- [Responsive props](#responsive-props)

## Overview

<Canvas>
  <Story name="Default">
    {args => (
      <Flex {...args}>
        <Box {...boxStyle} style={{marginRight: 10}}>
          1
        </Box>
        <Box {...boxStyle}>2</Box>
      </Flex>
    )}
  </Story>
</Canvas>

<ArgsTable story="Default" />

## Stories

### Column

<Canvas>
  <Story name="Column">
    {args => (
      <Flex
        direction={FLEX_DIRECTION.COLUMN}
        marginBottom={FLEX_MARGINS.MEDIUM}
        fullWidth
      >
        <Box {...boxStyle} style={{marginBottom: 10}}>
          1
        </Box>
        <Box {...boxStyle}>2</Box>
      </Flex>
    )}
  </Story>
</Canvas>

### Row

<Canvas>
  <Story name="Row">
    {args => (
      <Flex direction={FLEX_DIRECTION.ROW} fullWidth>
        <Box {...boxStyle} style={{marginRight: 10}}>
          1
        </Box>
        <Box {...boxStyle}>2</Box>
      </Flex>
    )}
  </Story>
</Canvas>

### Justify and align

<Canvas>
  <Story name="JustifyAndAlign">
    {args => (
      <Flex fullWidth direction="column">
        <Flex
          direction={FLEX_DIRECTION.ROW}
          marginBottom={FLEX_MARGINS.MEDIUM}
          justifyContent={FLEX_JUSTIFY_VALUES.SPACE_BETWEEN}
          fullWidth
        >
          <Flex>
            <Box {...boxStyle}>space between</Box>
          </Flex>
          <Flex>
            <Box {...boxStyle}>space between</Box>
          </Flex>
        </Flex>
        <SeparatorHorizontal />
        <Flex
          direction={FLEX_DIRECTION.ROW}
          marginTop={FLEX_MARGINS.MEDIUM}
          marginBottom={FLEX_MARGINS.MEDIUM}
          justifyContent={FLEX_JUSTIFY_VALUES.SPACE_AROUND}
          fullWidth
        >
          <Flex>
            <Box {...boxStyle}>space around</Box>
          </Flex>
          <Flex>
            <Box {...boxStyle}>space around</Box>
          </Flex>
        </Flex>
        <SeparatorHorizontal />
        <Flex
          direction={FLEX_DIRECTION.ROW}
          marginBottom={FLEX_MARGINS.MEDIUM}
          marginTop={FLEX_MARGINS.MEDIUM}
          justifyContent={FLEX_JUSTIFY_VALUES.FLEX_START}
          fullWidth
        >
          <Flex marginRight={FLEX_MARGINS.MEDIUM}>
            <Box {...boxStyle}>flex start</Box>
          </Flex>
          <Flex>
            <Box {...boxStyle}>flex start</Box>
          </Flex>
        </Flex>
        <SeparatorHorizontal />
        <Flex
          direction={FLEX_DIRECTION.ROW}
          marginTop={FLEX_MARGINS.MEDIUM}
          justifyContent={FLEX_JUSTIFY_VALUES.FLEX_END}
          fullWidth
        >
          <Flex marginRight={FLEX_MARGINS.MEDIUM}>
            <Box {...boxStyle}>flex end</Box>
          </Flex>
          <Flex>
            <Box {...boxStyle}>flex end</Box>
          </Flex>
        </Flex>
      </Flex>
    )}
  </Story>
</Canvas>

### Margins

Use margins to make space between components. They work in single direction `marginTop="l"` or in all directions at once `margin="l"`.

<Canvas>
  <Story name="Margins">
    {args => {
      const fixedWidthBox = {style: {width: '100px'}};
      const marginTypeLabelBox = {style: {width: '100px', flexShrink: 0}};
      return (
        <Flex fullWidth direction="column">
          {Object.values(FLEX_MARGINS).map(marginType => (
            <Flex marginBottom={FLEX_MARGINS.SMALL}>
              <Box {...marginTypeLabelBox}>
                <Text>{marginType}</Text>
              </Box>
              <Flex marginRight={marginType}>
                <Box {...boxStyle} {...fixedWidthBox} />
              </Flex>
              <Flex>
                <Box {...boxStyle} {...fixedWidthBox} />
              </Flex>
            </Flex>
          ))}
        </Flex>
      );
    }}
  </Story>
</Canvas>

## Responsive props

To control styles that differ across screen sizes you can use responsive props. All props marked as Responsive support [object and array syntax](/story/foundation-âœ¨-responsive-props--page).

Resize window to check how component is changing flex direction and item margins based on window width.

<Canvas>
  <Flex direction={['column', null, 'row']}>
    <Flex
      margin
      fullWidth
      marginBottom={{
        sm: 'xs',
        md: 'm',
        lg: 'none',
      }}
    >
      <Box {...boxStyle}>1</Box>
    </Flex>
    <Flex
      margin
      fullWidth
      marginBottom={{
        sm: 'xs',
        md: 'm',
        lg: 'none',
      }}
      marginLeft={{
        lg: 's',
        xl: 'l',
      }}
    >
      <Box {...boxStyle}>2</Box>
    </Flex>
    <Flex
      margin
      fullWidth
      marginLeft={{
        lg: 's',
        xl: 'l',
      }}
    >
      <Box {...boxStyle}>3</Box>
    </Flex>
  </Flex>
</Canvas>

## Accessibility

<FlexA11y />
