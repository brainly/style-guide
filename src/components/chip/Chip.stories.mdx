import {ArgsTable, Meta, Story, Canvas} from '@storybook/addon-docs';
import {StoryVariantTable} from '../../docs/utils';
import PageHeader from 'blocks/PageHeader';
import Icon from '../icons/Icon';
import SubjectIcon from '../subject-icons/SubjectIcon';
import Headline from '../text/Headline';
import Text from '../text/Text';
import Button from '../buttons/Button';
import Flex from '../flex/Flex';
import Chip, {SIZE} from './Chip';
import ChipGroup from './ChipGroup';
const chips = [
  {value: 'physics', label: 'Physics', icon: 'physics'},
  {value: 'biology', label: 'Biology', icon: 'biology'},
  {value: 'mathematics', label: 'Math', icon: 'logic'},
];

<Meta
  title="Components/Chip"
  component={Chip}
  argTypes={{
    children: {
      type: 'string',
    },
    onChange: {
      table: {
        category: 'Events',
      },
    },
  }}
  args={{children: 'Physics'}}
/>

<PageHeader>Chip</PageHeader>

## Overview

<Canvas>
  <Story name="Default">{args => <Chip {...args} />}</Story>
</Canvas>

<ArgsTable story="Default" />

## Stories

<Canvas>
  <Story name="Controlled/Uncontrolled">
    {args => {
      const [selected, setSelected] = React.useState(chips[0].value);
      const switchValue = () =>
        setSelected(chips[Math.floor(Math.random() * 3)].value);
      return (
        <StoryVariantTable>
          <tbody>
            <tr>
              <td>
                <Headline
                  extraBold
                  transform="uppercase"
                  as="span"
                  color="text-gray-40"
                  size="medium"
                >
                  Controlled
                </Headline>
              </td>
              <td>
                <Flex gap="s">
                  {chips.map(({value, icon, label}) => (
                    <Chip
                      {...args}
                      icon={
                        <SubjectIcon type={icon} size="small" aria-hidden />
                      }
                      checked={value === selected}
                      onChange={() => setSelected(value)}
                      value={value}
                      name="con"
                    >
                      {label}
                    </Chip>
                  ))}
                </Flex>
              </td>
              <td>
                <Button onClick={switchValue}>Switch value</Button>
              </td>
            </tr>
            <tr>
              <td>
                <Headline
                  extraBold
                  transform="uppercase"
                  as="span"
                  color="text-gray-40"
                  size="medium"
                >
                  Uncontrolled
                </Headline>
              </td>
              <td>
                <Flex gap="s">
                  {chips.map(({value, icon, label}) => (
                    <Chip
                      {...args}
                      icon={
                        <SubjectIcon type={icon} size="small" aria-hidden />
                      }
                      value={value}
                      name="uncon"
                    >
                      {label}
                    </Chip>
                  ))}
                </Flex>
              </td>
            </tr>
          </tbody>
        </StoryVariantTable>
      );
    }}
  </Story>
</Canvas>

<Canvas>
  <Story name="Chip group">
    {args => {
      const [selected, setSelected] = React.useState(chips[0].value);
      const switchValue = () =>
        setSelected(chips[Math.floor(Math.random() * 3)].value);
      return (
        <StoryVariantTable>
          <tbody>
            <tr>
              <td>
                <Headline
                  extraBold
                  transform="uppercase"
                  as="span"
                  color="text-gray-40"
                  size="medium"
                >
                  Controlled
                </Headline>
              </td>
              <td>
                <ChipGroup
                  value={selected}
                  onChange={(e, value) => setSelected(value)}
                >
                  {chips.map(({value, icon, label}) => (
                    <Chip
                      {...args}
                      icon={
                        <SubjectIcon type={icon} size="small" aria-hidden />
                      }
                      value={value}
                      name="uncon"
                    >
                      {label}
                    </Chip>
                  ))}
                </ChipGroup>
              </td>
              <td>
                <Button onClick={switchValue}>Switch value</Button>
              </td>
            </tr>
            <tr>
              <td>
                <Headline
                  extraBold
                  transform="uppercase"
                  as="span"
                  color="text-gray-40"
                  size="medium"
                >
                  Uncontrolled
                </Headline>
              </td>
              <td>
                <ChipGroup>
                  {chips.map(({value, icon, label}) => (
                    <Chip
                      {...args}
                      icon={
                        <SubjectIcon type={icon} size="small" aria-hidden />
                      }
                      value={value}
                      name="uncon"
                    >
                      {label}
                    </Chip>
                  ))}
                </ChipGroup>
              </td>
            </tr>
          </tbody>
        </StoryVariantTable>
      );
    }}
  </Story>
</Canvas>

<Canvas>
  <Story name="Sizes">
    {args => (
      <StoryVariantTable>
        <tbody>
          {Object.values(SIZE).map(size => (
            <tr key={size}>
              <td>
                <Headline
                  extraBold
                  transform="uppercase"
                  as="span"
                  color="text-gray-40"
                  size="medium"
                >
                  {size}
                </Headline>
              </td>
              <td>
                <Chip {...args} size={size} />
              </td>
            </tr>
          ))}
        </tbody>
      </StoryVariantTable>
    )}
  </Story>
</Canvas>
