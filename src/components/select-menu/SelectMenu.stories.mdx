import {ArgsTable, Meta, Story, Canvas} from '@storybook/addon-docs';
import SelectMenu, {
  SIZE as SELECT_SIZE,
  COLOR as SELECT_COLOR,
} from './SelectMenu';
import PageHeader from 'blocks/PageHeader';
import Button from '../buttons/Button';
import Text from '../text/Text';
import Flex from '../flex/Flex';
import SelectMenuA11y from './stories/SelectMenu.a11y.mdx';
import Headline from '../text/Headline';
import {StoryVariant, StoryVariantTable} from '../../docs/utils';
const Container = (Story, options) => {
  const {args, parameters} = options;
  return (
    <div
      style={{
        minHeight: parameters.height || '300px',
        position: 'relative',
        width: '100%',
        boxSizing: 'border-box',
        overflow: 'hidden',
      }}
    >
      <Story {...options} />
    </div>
  );
};

<Meta
  title="Components/SelectMenu"
  component={SelectMenu.Root}
  argTypes={{
    defaultExpanded: {
      control: {
        type: 'boolean',
      },
    },
    size: {
      control: {
        type: 'select',
        options: SELECT_SIZE,
      },
    },
    color: {
      control: {
        type: 'select',
        options: SELECT_COLOR,
      },
    },
  }}
  args={{
    disabled: false,
    size: SELECT_SIZE.M,
    color: SELECT_COLOR.DEFAULT,
  }}
  decorators={[Container]}
/>

<PageHeader>SelectMenu</PageHeader>

This component is a controlled component, so you have to handle selecting options.

- [Stories](#stories)
- [Accessibility](#accessibility)

## Overview

<Canvas>
  <Story
    name="Default"
    parameters={{
      chromatic: {disableSnapshot: true},
    }}
  >
    {args => (
      <SelectMenu.Root {...args}>
        <SelectMenu.Option value="history">History</SelectMenu.Option>
        <SelectMenu.Option value="science">Science</SelectMenu.Option>
      </SelectMenu.Root>
    )}
  </Story>
</Canvas>

<ArgsTable story="Default" />

## Stories

### Controlled

<Canvas>
  <Story
    name="Controlled"
    parameters={{
      chromatic: {disableSnapshot: true},
    }}
  >
    {args => {
      const [selectedOptions, setSelectedOptions] = React.useState([
        {value: 'history', label: 'History'},
      ]);
      return (
        <div style={{width: '200px'}}>
          <SelectMenu.Root
            {...args}
            selectedOptions={selectedOptions}
            onOptionChange={option => {
              setSelectedOptions([option]);
            }}
          >
            <SelectMenu.Option value="history">History</SelectMenu.Option>
            <SelectMenu.Option value="science">Science</SelectMenu.Option>
          </SelectMenu.Root>
        </div>
      );
    }}
  </Story>
</Canvas>

## Accessibility

<SelectMenuA11y />
